jQuery(function($){$.fusionModal=function(mask,dialog,params){var mask_id=(mask!='')?$(mask):'';var dialog_id=$(dialog);var param=$.extend({mask_op:0.8,maskIndex:900,dialogIndex:901,winH:null,winW:null,scrollTop:null,documentH:null,documentW:null,dialogW:null,dialogH:null,win_resize:true,scroll_resize:true},params||{});if(mask_id)$(mask_id).css({'position':'absolute','left':0,'top':0,'z-index':param.maskIndex,'background-color':'#000','display':'block'});$(dialog_id).css({'position':'absolute','left':0,'top':0,'display':'block','z-index':param.dialogIndex});$(window).resize(function(){get_window_size();get_document_scrolltop();get_document_size();if(param.win_resize){if(mask_id)$(mask_id).css({'width':param.winW,'height':param.documentH});$(dialog_id).css('top',param.scrollTop-param.dialogH/2);$(dialog_id).css('left',param.winW/2-param.dialogW/2)}});$(window).scroll(function(){get_window_size();get_document_scrolltop();get_document_size();if(param.scroll_resize){$(dialog_id).css('top',param.scrollTop-param.dialogH/2);$(dialog_id).css('left',param.winW/2-param.dialogW/2)}});function get_window_size(){param.winH=$(window).height();param.winW=$(window).width()}function get_document_size(){param.documentH=$(document).height();param.documentW=$(document).width()}function get_document_scrolltop(){var _y=(window.pageYOffset)?window.pageYOffset:(document.documentElement&&document.documentElement.scrollTop)?document.documentElement.scrollTop:(document.body)?document.body.scrollTop:0;if(_y<1){param.scrollTop=param.winH/2}else{param.scrollTop=param.winH/2+_y}}function modal_window(){get_window_size();get_document_scrolltop();get_document_size();if(mask_id){$(mask_id).css({'width':param.winW,'height':param.documentH});$(mask_id).fadeTo("slow",param.mask_op)}if(param.dialogW==null&&param.dialogH==null){param.dialogW=$(dialog_id).width();param.dialogH=$(dialog_id).height()}$(dialog_id).css({'width':param.dialogW,'height':param.dialogH});$(dialog_id).css('top',param.scrollTop-param.dialogH/2);$(dialog_id).css('left',param.winW/2-param.dialogW/2);$(dialog_id).fadeIn(1000)}modal_window()},fusionModal_close=function(mask,dialog,callMethod){var callbacks=$.Callbacks();var callFunction=callMethod;var mask_id=(mask!='')?$(mask):'';var dialog_id=$(dialog);if(mask_id)$(mask_id).hide();$(dialog_id).hide();if(callFunction!=undefined){callbacks.add(callFunction);callbacks.fire(targetID,json)}}});