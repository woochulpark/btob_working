jQuery(function($){$.fn.fusionAjaxRecord=function(params,callMethod){var targetID=$(this);var callbacks=$.Callbacks();var callFunction=callMethod;var param=$.extend({filename:null,data:''},params||{});$.ajax({type:"post",url:param.filename,cache:false,dataType:'text',data:param.data,success:function(data,status){var json=$.parseJSON(data);if(typeof(json.result)!='undefined'){if(json.result=='false'){alert(json.msg);if(typeof(json.fieldname)!='undefined'&&json.fieldname!=''){$('#'+json.fieldname).focus()}}else{callbacks.add(callFunction);callbacks.fire(targetID,json)}}},error:function(data,status,errorThrown){alert(data.responseText+' '+status+' '+errorThrown)}})}});